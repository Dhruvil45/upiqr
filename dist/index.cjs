"use strict";var w=Object.create;var s=Object.defineProperty,P=Object.defineProperties,U=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,C=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var m=(n,t,i)=>t in n?s(n,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[t]=i,a=(n,t)=>{for(var i in t||(t={}))d.call(t,i)&&m(n,i,t[i]);if(p)for(var i of p(t))Q.call(t,i)&&m(n,i,t[i]);return n},u=(n,t)=>P(n,b(t));var L=(n,t)=>{for(var i in t)s(n,i,{get:t[i],enumerable:!0})},I=(n,t,i,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of v(t))!d.call(n,e)&&e!==i&&s(n,e,{get:()=>t[e],enumerable:!(o=U(t,e))||o.enumerable});return n};var k=(n,t,i)=>(i=n!=null?w(C(n)):{},I(t||!n||!n.__esModule?s(i,"default",{value:n,enumerable:!0}):i,n)),N=n=>I(s({},"__esModule",{value:!0}),n);var l=(n,t,i)=>new Promise((o,e)=>{var y=r=>{try{g(i.next(r))}catch(h){e(h)}},R=r=>{try{g(i.throw(r))}catch(h){e(h)}},g=r=>r.done?o(r.value):Promise.resolve(r.value).then(y,R);g((i=i.apply(n,t)).next())});var O={};L(O,{UPIQR:()=>f});module.exports=N(O);var c=k(require("qrcode"),1);var f=class{constructor(){this.config={currency:"INR",outputType:"dataURL"}}set(t){return this.config=a(a({},this.config),t),this}setOptions(t){return this.config=a(a({},this.config),t),this}_validateConfig(){if(!this.config.upiId||!this.config.name)throw new Error("UPI ID (upiId) and Payee Name (name) are mandatory.");if(!/^[a-zA-Z0-9.\-_]{2,256}@[a-zA-Z]{2,64}$/.test(this.config.upiId))throw new Error("Invalid UPI ID format. It should be like 'user@bank'.");if(this.config.amount&&(isNaN(this.config.amount)||this.config.amount<=0))throw new Error("Amount must be a positive number.")}getIntent(){this._validateConfig();let t=new URLSearchParams({pa:this.config.upiId,pn:this.config.name});return this.config.amount&&t.set("am",this.config.amount.toFixed(2)),this.config.minimumAmount&&t.set("mam",this.config.minimumAmount.toFixed(2)),this.config.currency&&t.set("cu",this.config.currency),this.config.payeeMerchantCode&&t.set("mc",this.config.payeeMerchantCode),this.config.transactionId&&t.set("tid",this.config.transactionId),this.config.transactionRef&&t.set("tr",this.config.transactionRef),this.config.transactionNote&&t.set("tn",this.config.transactionNote),`upi://pay?${t.toString()}`}generate(){return l(this,null,function*(){let t=this.getIntent(),i={margin:this.config.margin,width:this.config.width,color:this.config.color,errorCorrectionLevel:this.config.errorCorrectionLevel||"M"};try{let o;switch(this.config.outputType||"dataURL"){case"svg":o=yield c.default.toString(t,u(a({},i),{type:"svg"}));break;case"utf8":o=yield c.default.toString(t,u(a({},i),{type:"utf8"}));break;case"dataURL":default:o=yield c.default.toDataURL(t,i);break}return{qr:o,intent:t}}catch(o){let e=o instanceof Error?o.message:"Unknown error";throw new Error(`Failed to generate QR code: ${e}`)}})}};0&&(module.exports={UPIQR});
